# ==========================================
# INFRASTRUCTURE & DOCKER CONFIGURATION
# ==========================================
EVO_API_VERSION=v2.3.6

# Host Ports (外部映射端口)
# 用於外部訪問，例如用 DBeaver 連接 DB (localhost:5433)
PORT_API=8080
PORT_DB=5433
PORT_REDIS=6379

# Data Persistence Paths (數據持久化路徑)
PATH_POSTGRES=./data/postgres_data
PATH_REDIS=./data/redis_data
PATH_INSTANCES=./data/evolution_instances

# ==========================================
# DATABASE CREDENTIALS (PostgreSQL)
# ==========================================
DB_USER=evolution
DB_PASSWORD=evolution_password
DB_NAME=evolution

# ==========================================
# EVOLUTION API CONFIGURATION
# ==========================================

# Authentication
AUTHENTICATION_API_KEY=sixteen_api_key

# Server URL
SERVER_URL=http://localhost:8080
DEL_INSTANCE=false

# ---------------------------------------------------------
# WhatsApp Configuration (CRITICAL)
# ---------------------------------------------------------
# 這裡是你要求的關鍵參數，確保版本號正確以支持掃碼
CONFIG_SESSION_PHONE_VERSION=2.3000.1031221906

# Database Connection
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
# [重點] 雖然外部端口是 5433，但容器內部互通使用的是原始端口 5432
DATABASE_CONNECTION_URI=postgresql://evolution:evolution_password@postgres:5432/evolution
DATABASE_CONNECTION_CLIENT_NAME=evolution_v2

# Database Features
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_DATA_HISTORIC=true

# Redis Cache Configuration
CACHE_REDIS_ENABLED=true
# [重點] 同樣使用服務名稱 'redis' 進行內部連接
CACHE_REDIS_URI=redis://redis:6379/1
CACHE_REDIS_PREFIX_KEY=evolution_v2
CACHE_REDIS_SAVE_INSTANCES=false
CACHE_LOCAL_ENABLED=false

# Disabled Modules
RABBITMQ_ENABLED=false
S3_ENABLED=false

# Cleanup Settings
CLEAN_STORE_CLEANING_INTERVAL=7200
CLEAN_STORE_MESSAGES=true
CLEAN_STORE_MESSAGE_UP_TO=false
CLEAN_STORE_CONTACTS=true
CLEAN_STORE_CHATS=true